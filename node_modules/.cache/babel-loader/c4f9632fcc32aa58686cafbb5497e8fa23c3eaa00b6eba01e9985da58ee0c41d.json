{"ast":null,"code":"var _jsxFileName = \"D:\\\\ThinkFast\\\\frontend\\\\src\\\\pages\\\\TakeQuiz.js\",\n  _s = $RefreshSig$();\n// // src/pages/TakeQuiz.js  (FINAL 100% WORKING VERSION)\n\n// import React, { useEffect, useState } from \"react\";\n// import { useParams, useNavigate } from \"react-router-dom\";\n// import API from \"../api\";\n\n// export default function TakeQuiz() {\n//   const { code } = useParams();\n//   const navigate = useNavigate();\n\n//   const [quiz, setQuiz] = useState(null);\n//   const [answers, setAnswers] = useState([]);\n//   const [name, setName] = useState(\"\");\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState(\"\");\n//   const [submitting, setSubmitting] = useState(false);\n\n//   useEffect(() => {\n//     const fetchQuiz = async () => {\n//       try {\n//         const res = await API.get(`/quiz/code/${code}`);\n//         setQuiz(res.data);\n//         setAnswers(new Array(res.data.questions.length).fill(-1));\n//         setLoading(false);\n//       } catch (err) {\n//         setError(\"Invalid or Expired Quiz Code\");\n//         setLoading(false);\n//       }\n//     };\n//     fetchQuiz();\n//   }, [code]);\n\n//   const handleAnswer = (qIndex, optionIndex) => {\n//     const newAnswers = [...answers];\n//     newAnswers[qIndex] = optionIndex;\n//     setAnswers(newAnswers);\n//   };\n\n//   const submitQuiz = async () => {\n//     if (!name.trim()) return alert(\"Please enter your name\");\n//     if (answers.includes(-1)) return alert(\"Answer all questions!\");\n\n//     setSubmitting(true);\n\n//     try {\n//       // Step 1: Submit to old leaderboard (public)\n//       const publicRes = await API.post(\"/quiz/submit\", {\n//         quizCode: code,\n//         studentName: name,\n//         answers,\n//       });\n\n//       const score = publicRes.data.score;\n\n//       // Step 2: Save full submission for Profile (protected)\n//       const token = localStorage.getItem(\"token\");\n//       if (token) {\n//         await API.post(\n//           \"/quiz/user/submit\", // Yeh naya route bana dena (neeche diya hai)\n//           {\n//             quizId: quiz._id,\n//             answers,\n//             score,\n//             timeTakenSeconds: 120, // Ya timer se le sakte ho\n//           },\n//           {\n//             headers: { Authorization: `Bearer ${token}` },\n//           }\n//         );\n//       }\n\n//       alert(`Quiz Submitted! Your Score: ${score}/${quiz.questions.length}`);\n//       navigate(\"/profile\"); // Profile pe redirect\n//     } catch (err) {\n//       console.error(err);\n//       alert(\"Submission failed. Try again.\");\n//     } finally {\n//       setSubmitting(false);\n//     }\n//   };\n\n//   if (loading) return <div style={{ padding: 40, fontSize: 24 }}>Loading Quiz...</div>;\n//   if (error)\n//     return (\n//       <div style={{ padding: 40, textAlign: \"center\" }}>\n//         <h2 style={{ color: \"red\" }}>{error}</h2>\n//         <button onClick={() => navigate(\"/student/home\")}>Back</button>\n//       </div>\n//     );\n\n//   return (\n//     <div style={{ padding: 40, maxWidth: 900, margin: \"0 auto\" }}>\n//       <h1 style={{ textAlign: \"center\", color: \"#4caf50\" }}>{quiz.title}</h1>\n//       <p style={{ textAlign: \"center\", fontSize: 18 }}>Code: <strong>{quiz.code}</strong></p>\n\n//       <div style={{ margin: \"20px 0\", padding: 15, background: \"#222\", borderRadius: 8 }}>\n//         <input\n//           type=\"text\"\n//           placeholder=\"Enter Your Name\"\n//           value={name}\n//           onChange={(e) => setName(e.target.value)}\n//           style={{ width: \"100%\", padding: 12, fontSize: 18, borderRadius: 6 }}\n//         />\n//       </div>\n\n//       {quiz.questions.map((q, i) => (\n//         <div\n//           key={i}\n//           style={{\n//             marginBottom: 30,\n//             padding: 20,\n//             border: \"2px solid #333\",\n//             borderRadius: 12,\n//             background: \"#1a1a1a\",\n//           }}\n//         >\n//           <h3 style={{ margin: \"0 0 15px 0\" }}>\n//             {i + 1}. {q.text}\n//           </h3>\n//           <div style={{ display: \"grid\", gap: 12 }}>\n//             {q.options.map((opt, j) => (\n//               <label\n//                 key={j}\n//                 style={{\n//                   display: \"flex\",\n//                   alignItems: \"center\",\n//                   padding: 12,\n//                   background: answers[i] === j ? \"#1976d2\" : \"#333\",\n//                   borderRadius: 8,\n//                   cursor: \"pointer\",\n//                   transition: \"0.3s\",\n//                 }}\n//               >\n//                 <input\n//                   type=\"radio\"\n//                   name={`q${i}`}\n//                   checked={answers[i] === j}\n//                   onChange={() => handleAnswer(i, j)}\n//                   style={{ marginRight: 12 }}\n//                 />\n//                 <span style={{ fontSize: 17 }}>{opt}</span>\n//               </label>\n//             ))}\n//           </div>\n//         </div>\n//       ))}\n\n//       <div style={{ textAlign: \"center\", marginTop: 40 }}>\n//         <button\n//           onClick={submitQuiz}\n//           disabled={submitting}\n//           style={{\n//             padding: \"15px 50px\",\n//             fontSize: 20,\n//             background: submitting ? \"#666\" : \"#1976d2\",\n//             color: \"white\",\n//             border: \"none\",\n//             borderRadius: 8,\n//             cursor: submitting ? \"not-allowed\" : \"pointer\",\n//           }}\n//         >\n//           {submitting ? \"Submitting...\" : \"Submit Quiz\"}\n//         </button>\n//         // Success state add à¤•à¤°à¥‹: const [showSuccess, setShowSuccess] = useState(false);\n// // Submit à¤•à¥‡ à¤¬à¤¾à¤¦: setShowSuccess(true);\n\n// {showSuccess && (\n//   <motion.div\n//     initial={{ scale: 0, rotate: 180 }}\n//     animate={{ scale: 1, rotate: 0 }}\n//     transition={{ type: \"spring\", stiffness: 200, delay: 0.5 }}\n//     style={{ textAlign: \"center\", marginTop: 40, padding: 20 }}\n//   >\n//     <Player\n//       autoplay\n//       loop={false}\n//       keepLastFrame\n//       src=\"https://assets4.lottiefiles.com/packages/lf20_jgxaqypp.json\"  // Trophy + Confetti\n//       style={{ width: 250, height: 250, margin: \"0 auto\" }}\n//     />\n//     <motion.h2\n//       initial={{ y: 20, opacity: 0 }}\n//       animate={{ y: 0, opacity: 1 }}\n//       transition={{ delay: 1 }}\n//       style={{ color: \"#FFD700\", fontSize: 28, marginTop: 10 }}\n//     >\n//       ðŸŽ‰ Amazing! Score: {score}/10\n//     </motion.h2>\n//     <motion.button\n//       whileHover={{ scale: 1.05 }}\n//       onClick={() => navigate(`/leaderboard/${code}`)}\n//       style={{ marginTop: 15, padding: \"12px 24px\", background: \"#4caf50\", color: \"white\", border: \"none\", borderRadius: 8 }}\n//     >\n//       View Leaderboard\n//     </motion.button>\n//   </motion.div>\n// )}\n//       </div>\n//     </div>\n//   );\n// }\nimport React, { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { motion } from \"framer-motion\";\nimport { Player } from \"@lottiefiles/react-lottie-player\"; // Ensure installed\nimport API from \"../api\";\nimport trophyAnimation from \"../assets/animations/trophy-success.json\"; // Update path\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TakeQuiz() {\n  _s();\n  const {\n    code\n  } = useParams();\n  const navigate = useNavigate();\n  const [quiz, setQuiz] = useState(null);\n  const [answers, setAnswers] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [score, setScore] = useState(0); // Added for success display\n\n  useEffect(() => {\n    const fetchQuiz = async () => {\n      try {\n        const res = await API.get(`/quiz/code/${code}`);\n        setQuiz(res.data);\n        setAnswers(new Array(res.data.questions.length).fill(-1));\n        setLoading(false);\n      } catch (err) {\n        setError(\"Invalid or Expired Quiz Code\");\n        setLoading(false);\n      }\n    };\n    fetchQuiz();\n  }, [code]);\n  const handleAnswer = (qIndex, optionIndex) => {\n    const newAnswers = [...answers];\n    newAnswers[qIndex] = optionIndex;\n    setAnswers(newAnswers);\n  };\n  const submitQuiz = async () => {\n    if (!name.trim()) return alert(\"Enter your name\");\n    if (answers.some(a => a === -1)) return alert(\"Answer all questions\");\n    setSubmitting(true);\n    try {\n      const res = await API.post(`/quiz/submit/${code}`, {\n        name,\n        answers\n      });\n      setScore(res.data.score);\n      setShowSuccess(true);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || \"Submission failed\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 259,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 260,\n    columnNumber: 21\n  }, this);\n  if (!quiz) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Quiz not found\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 261,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 40\n    },\n    children: !showSuccess ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: quiz.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Your Name\",\n        value: name,\n        onChange: e => setName(e.target.value),\n        style: {\n          marginBottom: 20,\n          padding: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }, this), quiz.questions.map((q, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 30\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: q.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 15\n        }, this), q.options.map((opt, j) => /*#__PURE__*/_jsxDEV(motion.button, {\n          onClick: () => handleAnswer(i, j),\n          whileHover: {\n            scale: 1.05\n          },\n          style: {\n            display: \"block\",\n            margin: \"10px 0\",\n            padding: 10,\n            background: answers[i] === j ? \"#4caf50\" : \"#2196f3\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: 8\n          },\n          children: opt\n        }, j, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 17\n        }, this))]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(motion.button, {\n        onClick: submitQuiz,\n        disabled: submitting,\n        whileHover: {\n          scale: 1.1\n        },\n        style: {\n          padding: \"12px 24px\",\n          background: \"#ff9800\",\n          color: \"white\",\n          border: \"none\",\n          borderRadius: 8\n        },\n        children: submitting ? \"Submitting...\" : \"Submit Quiz\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        scale: 0,\n        rotate: 180\n      },\n      animate: {\n        scale: 1,\n        rotate: 0\n      },\n      transition: {\n        type: \"spring\",\n        stiffness: 200,\n        delay: 0.5\n      },\n      style: {\n        textAlign: \"center\",\n        marginTop: 40,\n        padding: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(Player, {\n        autoplay: true,\n        loop: false,\n        keepLastFrame: true,\n        src: trophyAnimation // Your JSON file\n        ,\n        style: {\n          width: 250,\n          height: 250,\n          margin: \"0 auto\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(motion.h2, {\n        initial: {\n          y: 20,\n          opacity: 0\n        },\n        animate: {\n          y: 0,\n          opacity: 1\n        },\n        transition: {\n          delay: 1\n        },\n        style: {\n          color: \"#FFD700\",\n          fontSize: 28,\n          marginTop: 10\n        },\n        children: [\"\\uD83C\\uDF89 Amazing! Score: \", score, \"/\", quiz.questions.length]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n        whileHover: {\n          scale: 1.05\n        },\n        onClick: () => navigate(`/leaderboard/${code}`),\n        style: {\n          marginTop: 15,\n          padding: \"12px 24px\",\n          background: \"#4caf50\",\n          color: \"white\",\n          border: \"none\",\n          borderRadius: 8\n        },\n        children: \"View Leaderboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 264,\n    columnNumber: 5\n  }, this);\n}\n_s(TakeQuiz, \"Fjc4pEZr96YWvfU+37azeJYcadU=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = TakeQuiz;\nuseEffect(() => {\n  socket.on(\"eliminated\", msg => {\n    alert(msg);\n    window.location.href = \"/eliminated\";\n  });\n}, []);\nvar _c;\n$RefreshReg$(_c, \"TakeQuiz\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","motion","Player","API","trophyAnimation","jsxDEV","_jsxDEV","Fragment","_Fragment","TakeQuiz","_s","code","navigate","quiz","setQuiz","answers","setAnswers","name","setName","loading","setLoading","error","setError","submitting","setSubmitting","showSuccess","setShowSuccess","score","setScore","fetchQuiz","res","get","data","Array","questions","length","fill","err","handleAnswer","qIndex","optionIndex","newAnswers","submitQuiz","trim","alert","some","a","post","_err$response","_err$response$data","response","children","fileName","_jsxFileName","lineNumber","columnNumber","style","padding","title","type","placeholder","value","onChange","e","target","marginBottom","map","q","i","text","options","opt","j","button","onClick","whileHover","scale","display","margin","background","color","border","borderRadius","disabled","div","initial","rotate","animate","transition","stiffness","delay","textAlign","marginTop","autoplay","loop","keepLastFrame","src","width","height","h2","y","opacity","fontSize","_c","socket","on","msg","window","location","href","$RefreshReg$"],"sources":["D:/ThinkFast/frontend/src/pages/TakeQuiz.js"],"sourcesContent":["// // src/pages/TakeQuiz.js  (FINAL 100% WORKING VERSION)\r\n\r\n// import React, { useEffect, useState } from \"react\";\r\n// import { useParams, useNavigate } from \"react-router-dom\";\r\n// import API from \"../api\";\r\n\r\n// export default function TakeQuiz() {\r\n//   const { code } = useParams();\r\n//   const navigate = useNavigate();\r\n\r\n//   const [quiz, setQuiz] = useState(null);\r\n//   const [answers, setAnswers] = useState([]);\r\n//   const [name, setName] = useState(\"\");\r\n//   const [loading, setLoading] = useState(true);\r\n//   const [error, setError] = useState(\"\");\r\n//   const [submitting, setSubmitting] = useState(false);\r\n\r\n//   useEffect(() => {\r\n//     const fetchQuiz = async () => {\r\n//       try {\r\n//         const res = await API.get(`/quiz/code/${code}`);\r\n//         setQuiz(res.data);\r\n//         setAnswers(new Array(res.data.questions.length).fill(-1));\r\n//         setLoading(false);\r\n//       } catch (err) {\r\n//         setError(\"Invalid or Expired Quiz Code\");\r\n//         setLoading(false);\r\n//       }\r\n//     };\r\n//     fetchQuiz();\r\n//   }, [code]);\r\n\r\n//   const handleAnswer = (qIndex, optionIndex) => {\r\n//     const newAnswers = [...answers];\r\n//     newAnswers[qIndex] = optionIndex;\r\n//     setAnswers(newAnswers);\r\n//   };\r\n\r\n//   const submitQuiz = async () => {\r\n//     if (!name.trim()) return alert(\"Please enter your name\");\r\n//     if (answers.includes(-1)) return alert(\"Answer all questions!\");\r\n\r\n//     setSubmitting(true);\r\n\r\n//     try {\r\n//       // Step 1: Submit to old leaderboard (public)\r\n//       const publicRes = await API.post(\"/quiz/submit\", {\r\n//         quizCode: code,\r\n//         studentName: name,\r\n//         answers,\r\n//       });\r\n\r\n//       const score = publicRes.data.score;\r\n\r\n//       // Step 2: Save full submission for Profile (protected)\r\n//       const token = localStorage.getItem(\"token\");\r\n//       if (token) {\r\n//         await API.post(\r\n//           \"/quiz/user/submit\", // Yeh naya route bana dena (neeche diya hai)\r\n//           {\r\n//             quizId: quiz._id,\r\n//             answers,\r\n//             score,\r\n//             timeTakenSeconds: 120, // Ya timer se le sakte ho\r\n//           },\r\n//           {\r\n//             headers: { Authorization: `Bearer ${token}` },\r\n//           }\r\n//         );\r\n//       }\r\n\r\n//       alert(`Quiz Submitted! Your Score: ${score}/${quiz.questions.length}`);\r\n//       navigate(\"/profile\"); // Profile pe redirect\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       alert(\"Submission failed. Try again.\");\r\n//     } finally {\r\n//       setSubmitting(false);\r\n//     }\r\n//   };\r\n\r\n//   if (loading) return <div style={{ padding: 40, fontSize: 24 }}>Loading Quiz...</div>;\r\n//   if (error)\r\n//     return (\r\n//       <div style={{ padding: 40, textAlign: \"center\" }}>\r\n//         <h2 style={{ color: \"red\" }}>{error}</h2>\r\n//         <button onClick={() => navigate(\"/student/home\")}>Back</button>\r\n//       </div>\r\n//     );\r\n\r\n//   return (\r\n//     <div style={{ padding: 40, maxWidth: 900, margin: \"0 auto\" }}>\r\n//       <h1 style={{ textAlign: \"center\", color: \"#4caf50\" }}>{quiz.title}</h1>\r\n//       <p style={{ textAlign: \"center\", fontSize: 18 }}>Code: <strong>{quiz.code}</strong></p>\r\n\r\n//       <div style={{ margin: \"20px 0\", padding: 15, background: \"#222\", borderRadius: 8 }}>\r\n//         <input\r\n//           type=\"text\"\r\n//           placeholder=\"Enter Your Name\"\r\n//           value={name}\r\n//           onChange={(e) => setName(e.target.value)}\r\n//           style={{ width: \"100%\", padding: 12, fontSize: 18, borderRadius: 6 }}\r\n//         />\r\n//       </div>\r\n\r\n//       {quiz.questions.map((q, i) => (\r\n//         <div\r\n//           key={i}\r\n//           style={{\r\n//             marginBottom: 30,\r\n//             padding: 20,\r\n//             border: \"2px solid #333\",\r\n//             borderRadius: 12,\r\n//             background: \"#1a1a1a\",\r\n//           }}\r\n//         >\r\n//           <h3 style={{ margin: \"0 0 15px 0\" }}>\r\n//             {i + 1}. {q.text}\r\n//           </h3>\r\n//           <div style={{ display: \"grid\", gap: 12 }}>\r\n//             {q.options.map((opt, j) => (\r\n//               <label\r\n//                 key={j}\r\n//                 style={{\r\n//                   display: \"flex\",\r\n//                   alignItems: \"center\",\r\n//                   padding: 12,\r\n//                   background: answers[i] === j ? \"#1976d2\" : \"#333\",\r\n//                   borderRadius: 8,\r\n//                   cursor: \"pointer\",\r\n//                   transition: \"0.3s\",\r\n//                 }}\r\n//               >\r\n//                 <input\r\n//                   type=\"radio\"\r\n//                   name={`q${i}`}\r\n//                   checked={answers[i] === j}\r\n//                   onChange={() => handleAnswer(i, j)}\r\n//                   style={{ marginRight: 12 }}\r\n//                 />\r\n//                 <span style={{ fontSize: 17 }}>{opt}</span>\r\n//               </label>\r\n//             ))}\r\n//           </div>\r\n//         </div>\r\n//       ))}\r\n\r\n//       <div style={{ textAlign: \"center\", marginTop: 40 }}>\r\n//         <button\r\n//           onClick={submitQuiz}\r\n//           disabled={submitting}\r\n//           style={{\r\n//             padding: \"15px 50px\",\r\n//             fontSize: 20,\r\n//             background: submitting ? \"#666\" : \"#1976d2\",\r\n//             color: \"white\",\r\n//             border: \"none\",\r\n//             borderRadius: 8,\r\n//             cursor: submitting ? \"not-allowed\" : \"pointer\",\r\n//           }}\r\n//         >\r\n//           {submitting ? \"Submitting...\" : \"Submit Quiz\"}\r\n//         </button>\r\n//         // Success state add à¤•à¤°à¥‹: const [showSuccess, setShowSuccess] = useState(false);\r\n// // Submit à¤•à¥‡ à¤¬à¤¾à¤¦: setShowSuccess(true);\r\n\r\n// {showSuccess && (\r\n//   <motion.div\r\n//     initial={{ scale: 0, rotate: 180 }}\r\n//     animate={{ scale: 1, rotate: 0 }}\r\n//     transition={{ type: \"spring\", stiffness: 200, delay: 0.5 }}\r\n//     style={{ textAlign: \"center\", marginTop: 40, padding: 20 }}\r\n//   >\r\n//     <Player\r\n//       autoplay\r\n//       loop={false}\r\n//       keepLastFrame\r\n//       src=\"https://assets4.lottiefiles.com/packages/lf20_jgxaqypp.json\"  // Trophy + Confetti\r\n//       style={{ width: 250, height: 250, margin: \"0 auto\" }}\r\n//     />\r\n//     <motion.h2\r\n//       initial={{ y: 20, opacity: 0 }}\r\n//       animate={{ y: 0, opacity: 1 }}\r\n//       transition={{ delay: 1 }}\r\n//       style={{ color: \"#FFD700\", fontSize: 28, marginTop: 10 }}\r\n//     >\r\n//       ðŸŽ‰ Amazing! Score: {score}/10\r\n//     </motion.h2>\r\n//     <motion.button\r\n//       whileHover={{ scale: 1.05 }}\r\n//       onClick={() => navigate(`/leaderboard/${code}`)}\r\n//       style={{ marginTop: 15, padding: \"12px 24px\", background: \"#4caf50\", color: \"white\", border: \"none\", borderRadius: 8 }}\r\n//     >\r\n//       View Leaderboard\r\n//     </motion.button>\r\n//   </motion.div>\r\n// )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Player } from \"@lottiefiles/react-lottie-player\"; // Ensure installed\r\nimport API from \"../api\";\r\nimport trophyAnimation from \"../assets/animations/trophy-success.json\"; // Update path\r\n\r\nexport default function TakeQuiz() {\r\n  const { code } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [quiz, setQuiz] = useState(null);\r\n  const [answers, setAnswers] = useState([]);\r\n  const [name, setName] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [showSuccess, setShowSuccess] = useState(false);\r\n  const [score, setScore] = useState(0); // Added for success display\r\n\r\n  useEffect(() => {\r\n    const fetchQuiz = async () => {\r\n      try {\r\n        const res = await API.get(`/quiz/code/${code}`);\r\n        setQuiz(res.data);\r\n        setAnswers(new Array(res.data.questions.length).fill(-1));\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setError(\"Invalid or Expired Quiz Code\");\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchQuiz();\r\n  }, [code]);\r\n\r\n  const handleAnswer = (qIndex, optionIndex) => {\r\n    const newAnswers = [...answers];\r\n    newAnswers[qIndex] = optionIndex;\r\n    setAnswers(newAnswers);\r\n  };\r\n\r\n  const submitQuiz = async () => {\r\n    if (!name.trim()) return alert(\"Enter your name\");\r\n    if (answers.some(a => a === -1)) return alert(\"Answer all questions\");\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      const res = await API.post(`/quiz/submit/${code}`, { name, answers });\r\n      setScore(res.data.score);\r\n      setShowSuccess(true);\r\n    } catch (err) {\r\n      alert(err.response?.data?.error || \"Submission failed\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error) return <div>{error}</div>;\r\n  if (!quiz) return <div>Quiz not found</div>;\r\n\r\n  return (\r\n    <div style={{ padding: 40 }}>\r\n      {!showSuccess ? (\r\n        <>\r\n          <h2>{quiz.title}</h2>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Your Name\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            style={{ marginBottom: 20, padding: 10 }}\r\n          />\r\n\r\n          {quiz.questions.map((q, i) => (\r\n            <div key={i} style={{ marginBottom: 30 }}>\r\n              <h3>{q.text}</h3>\r\n              {q.options.map((opt, j) => (\r\n                <motion.button\r\n                  key={j}\r\n                  onClick={() => handleAnswer(i, j)}\r\n                  whileHover={{ scale: 1.05 }}\r\n                  style={{\r\n                    display: \"block\",\r\n                    margin: \"10px 0\",\r\n                    padding: 10,\r\n                    background: answers[i] === j ? \"#4caf50\" : \"#2196f3\",\r\n                    color: \"white\",\r\n                    border: \"none\",\r\n                    borderRadius: 8\r\n                  }}\r\n                >\r\n                  {opt}\r\n                </motion.button>\r\n              ))}\r\n            </div>\r\n          ))}\r\n\r\n          <motion.button\r\n            onClick={submitQuiz}\r\n            disabled={submitting}\r\n            whileHover={{ scale: 1.1 }}\r\n            style={{ padding: \"12px 24px\", background: \"#ff9800\", color: \"white\", border: \"none\", borderRadius: 8 }}\r\n          >\r\n            {submitting ? \"Submitting...\" : \"Submit Quiz\"}\r\n          </motion.button>\r\n        </>\r\n      ) : (\r\n        <motion.div\r\n          initial={{ scale: 0, rotate: 180 }}\r\n          animate={{ scale: 1, rotate: 0 }}\r\n          transition={{ type: \"spring\", stiffness: 200, delay: 0.5 }}\r\n          style={{ textAlign: \"center\", marginTop: 40, padding: 20 }}\r\n        >\r\n          <Player\r\n            autoplay\r\n            loop={false}\r\n            keepLastFrame\r\n            src={trophyAnimation}  // Your JSON file\r\n            style={{ width: 250, height: 250, margin: \"0 auto\" }}\r\n          />\r\n          <motion.h2\r\n            initial={{ y: 20, opacity: 0 }}\r\n            animate={{ y: 0, opacity: 1 }}\r\n            transition={{ delay: 1 }}\r\n            style={{ color: \"#FFD700\", fontSize: 28, marginTop: 10 }}\r\n          >\r\n            ðŸŽ‰ Amazing! Score: {score}/{quiz.questions.length}\r\n          </motion.h2>\r\n          <motion.button\r\n            whileHover={{ scale: 1.05 }}\r\n            onClick={() => navigate(`/leaderboard/${code}`)}\r\n            style={{ marginTop: 15, padding: \"12px 24px\", background: \"#4caf50\", color: \"white\", border: \"none\", borderRadius: 8 }}\r\n          >\r\n            View Leaderboard\r\n          </motion.button>\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nuseEffect(() => {\r\n  socket.on(\"eliminated\", (msg) => {\r\n    alert(msg);\r\n    window.location.href = \"/eliminated\";\r\n  });\r\n}, []);\r\n"],"mappings":";;AAAA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,SAASC,MAAM,QAAQ,eAAe;AACtC,SAASC,MAAM,QAAQ,kCAAkC,CAAC,CAAC;AAC3D,OAAOC,GAAG,MAAM,QAAQ;AACxB,OAAOC,eAAe,MAAM,0CAA0C,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}